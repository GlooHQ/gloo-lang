---
title: BamlStreamResponse
description: Type representing a BAML stream response with partial and final states
---

Stream responses consist of a partial state, final state, and potential error state. This type is used by [Generated Hooks](./generated-hooks) and [useBamlAction](./use-baml-action) when streaming is enabled.

<Warning>
  Note that partial and final states are optional, as they depend on the streaming state. For hook configuration, see [Hook Props](./hook-props).
</Warning>

<CodeBlocks>
```typescript Type Definition
type BamlStreamResponse<PartialType, FinalType> = {
  partial?: PartialType
  final?: FinalType
  error?: Error | BamlValidationError | BamlClientFinishReasonError
}
```

```typescript Example Usage
// Basic string streaming
const response: BamlStreamResponse<string, string> = {
  partial: "Hello ",
  final: "Hello World!"
}

// Complex type streaming
interface ChatMessage {
  role: 'user' | 'assistant'
  content: string
}

const chatResponse: BamlStreamResponse<ChatMessage, ChatMessage[]> = {
  partial: { role: 'assistant', content: 'I am thinking...' },
  final: [
    { role: 'user', content: 'Hello' },
    { role: 'assistant', content: 'Hello! How can I help?' }
  ]
}
```
</CodeBlocks>

## Type Parameters

<ParamField
  path="PartialType"
  type="generic"
>
  The type of intermediate/partial responses during streaming. This is often a subset or single instance of the final type.
</ParamField>

<ParamField
  path="FinalType"
  type="generic"
>
  The type of the complete/final response after streaming is complete.
</ParamField>

## Properties

<ParamField
  path="partial"
  type="PartialType | undefined"
>
  The latest partial response during streaming. This is updated as new chunks arrive.
</ParamField>

<ParamField
  path="final"
  type="FinalType | undefined"
>
  The complete response after streaming is finished. This is only set when the stream completes successfully.
</ParamField>

<ParamField
  path="error"
  type="Error | BamlValidationError | BamlClientFinishReasonError | undefined"
>
  Any error that occurred during streaming. See [Error Types](./error-types) for more details.
</ParamField>

## Usage with React Hooks

The stream response type is commonly used with BAML's React hooks. For complete hook usage, see [Hook Result](./hook-result).

<CodeBlocks>
```typescript Hook Usage
function ChatComponent() {
  const { data, partialData, error } = useChatCompletion({
    stream: true,
    onPartial: (response) => {
      // Handle partial response
      console.log('Partial:', response)
    },
    onFinal: (response) => {
      // Handle final response
      console.log('Final:', response)
    }
  })

  // Current response is either partial or final
  const currentResponse = partialData ?? data

  return (
    <div>
      {error && <div>Error: {error.message}</div>}
      {currentResponse && <div>{currentResponse}</div>}
    </div>
  )
}
```
</CodeBlocks>

## Best Practices

1. **Type Safety**
   ```typescript
   // ✅ Good - Explicit types
   const response: BamlStreamResponse<string, string[]> = {
     partial: "Hello",
     final: ["Hello", "World"]
   }

   // ❌ Bad - Implicit any
   const response = {
     partial: "Hello",
     final: ["Hello", "World"]
   }
   ```

2. **Error Handling**
   ```typescript
   // ✅ Good - Check both error and response
   if (response.error) {
     handleError(response.error)
   } else if (response.final) {
     handleSuccess(response.final)
   } else if (response.partial) {
     handlePartial(response.partial)
   }

   // ❌ Bad - Missing error check
   if (response.final) {
     handleSuccess(response.final)
   }
   ```

3. **Type Consistency**
   ```typescript
   // ✅ Good - Related partial and final types
   type BamlStreamResponse<string, string[]>

   // ❌ Bad - Unrelated partial and final types
   type BamlStreamResponse<number, string>
